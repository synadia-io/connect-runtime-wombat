model_version: '1'
kind: sink
label: GCP PubSub
name: gcp_pubsub
icon: 
  data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjI1NiIKICAgaGVpZ2h0PSIyNTYiCiAgIHZpZXdCb3g9IjAgMCAyNTYgMjU2IgogICB2ZXJzaW9uPSIxLjEiCiAgIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIgogICBpZD0ic3ZnMTIiCiAgIHNvZGlwb2RpOmRvY25hbWU9Imdvb2dsZS1jbG91ZC5zdmciCiAgIGlua3NjYXBlOnZlcnNpb249IjEuMSAoMToxLjErMjAyMTA1MjYxNTE3K2NlNjY2M2IzYjcpIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxNiIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9Im5hbWVkdmlldzE0IgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjAiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGhlaWdodD0iMjU2cHgiCiAgICAgaW5rc2NhcGU6em9vbT0iMi4xNzcxODQ1IgogICAgIGlua3NjYXBlOmN4PSI2OS4xMjU5NzUiCiAgICAgaW5rc2NhcGU6Y3k9IjExNi4yMDUxMyIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE5MjAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iMTAxNiIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMjciCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJzdmcxMiIgLz4KICA8ZwogICAgIGlkPSJnMTAiCiAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMuODQ4MDEwM2UtNSwyNS4xMDEyMzgpIj4KICAgIDxwYXRoCiAgICAgICBkPSJtIDE3MC4yNTE3LDU2LjgxODYgMjIuMjUzLC0yMi4yNTMgMS40ODMsLTkuMzcgYyAtNDAuNTUxLC0zNi44NzMgLTEwNS4wMTIsLTMyLjY5MiAtMTQxLjU2Nyw4LjcyNCAtMTAuMTU0LDExLjUwMyAtMTcuNjg3LDI1Ljg0NCAtMjEuNzA0LDQwLjY1MyBsIDcuOTcsLTEuMTIzIDQ0LjUwNSwtNy4zMzkgMy40MzYsLTMuNTE0IGMgMTkuNzk3LC0yMS43NDIgNTMuMjcsLTI0LjY2NyA3Ni4xMjgsLTYuMTY4IHoiCiAgICAgICBmaWxsPSIjZWE0MzM1IgogICAgICAgaWQ9InBhdGgyIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Im0gMjI0LjIwNDgsNzMuOTE4MiBjIC01LjExNSwtMTguODM2IC0xNS42MTYsLTM1Ljc2OSAtMzAuMjE3LC00OC43MjIgbCAtMzEuMjMyLDMxLjIzMiBjIDEzLjE4OCwxMC43NzYgMjAuNzAxLDI3LjAxIDIwLjM3OSw0NC4wMzcgdiA1LjU0NCBjIDE1LjM1MSwwIDI3Ljc5NywxMi40NDUgMjcuNzk3LDI3Ljc5NiAwLDE1LjM1MiAtMTIuNDQ2LDI3LjQ4NSAtMjcuNzk3LDI3LjQ4NSBoIC01NS42NzEgbCAtNS40NjYsNS45MzQgdiAzMy4zNCBsIDUuNDY2LDUuMjMxIGggNTUuNjcxIGMgMzkuOTMsMC4zMTEgNzIuNTUyLC0zMS40OTQgNzIuODYzLC03MS40MjQgMC4xODgsLTI0LjIwMyAtMTEuNzQ1LC00Ni44OTMgLTMxLjc5MywtNjAuNDUzIgogICAgICAgZmlsbD0iIzQyODVmNCIKICAgICAgIGlkPSJwYXRoNCIgLz4KICAgIDxwYXRoCiAgICAgICBkPSJtIDcxLjg3MDQsMjA1Ljc5NTcgaCA1NS41OTMgdiAtNDQuNTA2IGggLTU1LjU5MyBjIC0zLjk2MSwtMC4wMDEgLTcuNzk3LC0wLjg1MiAtMTEuMzk5LC0yLjQ5OCBsIC03Ljg4NywyLjQyIC0yMi40MDksMjIuMjUzIC0xLjk1Miw3LjU3NCBjIDEyLjU2Nyw5LjQ4OSAyNy45LDE0LjgyNSA0My42NDcsMTQuNzU3IgogICAgICAgZmlsbD0iIzM0YTg1MyIKICAgICAgIGlkPSJwYXRoNiIgLz4KICAgIDxwYXRoCiAgICAgICBkPSJtIDcxLjg3MDQsNjEuNDI1NSBjIC0zOS45MzEsMC4yMzggLTcyLjEwNywzMi44MDIgLTcxLjg2OSw3Mi43MzIgMC4xMzMsMjIuMjk4IDEwLjU0Nyw0My4yODggMjguMjIyLDU2Ljg4MSBsIDMyLjI0OCwtMzIuMjQ3IGMgLTEzLjk5MSwtNi4zMjEgLTIwLjIwOCwtMjIuNzg2IC0xMy44ODcsLTM2Ljc3NiA2LjMyLC0xMy45OSAyMi43ODYsLTIwLjIwNyAzNi43NzUsLTEzLjg4NyA2LjE2NSwyLjc4NSAxMS4xMDIsNy43MjMgMTMuODg3LDEzLjg4NyBsIDMyLjI0OCwtMzIuMjQ3IGMgLTEzLjcyMSwtMTcuOTM3IC0zNS4wNDEsLTI4LjQyNCAtNTcuNjI0LC0yOC4zNDMiCiAgICAgICBmaWxsPSIjZmJiYzA1IgogICAgICAgaWQ9InBhdGg4IiAvPgogIDwvZz4KPC9zdmc+Cg==
status: preview
description: >-
  Sends messages to a GCP Cloud Pub/Sub topic. Metadata from messages are sent as
  attributes.
fields:
  - path: project
    name: project
    label: Project
    type: string
    description: >-
      The Google Cloud project to write to.
  - path: credentials_json
    name: credentials_json
    label: Credentials JSON
    type: string
    description: >-
      JSON credentials for authenticating with GCP.
  - path: topic
    name: topic
    label: Topic
    type: expression
    description: >-
      The topic to publish to. This field supports interpolation functions.
  - path: endpoint
    name: endpoint
    label: Endpoint
    type: string
    optional: true
    description: >-
      An optional endpoint to override the default of `pubsub.googleapis.com:443`.
      This can be used to connect to a region specific pubsub endpoint. For a list
      of valid values, see [this document](https://cloud.google.com/pubsub/docs/reference/service_apis_overview#list_of_regional_endpoints).
  - path: ordering_key
    name: ordering_key
    label: Ordering Key
    type: expression
    optional: true
    description: >-
      The ordering key to use for publishing messages. This field supports interpolation
      functions.
  - path: publish_timeout
    name: publish_timeout
    label: Publish Timeout
    type: string
    default: 1m
    optional: true
    description: >-
      The maximum duration to wait for a message to be published before timing out.
  - path: metadata
    name: metadata
    label: Metadata
    type: object
    optional: true
    description: >-
      Specify criteria for which metadata values are attached to objects
      as headers.
    fields:
      - path: metadata.exclude_prefixes
        name: exclude_prefixes
        label: Exclude Prefixes
        type: string
        optional: true
        description: >-
          Provide a list of explicit metadata key prefixes to be excluded when
          adding metadata to sent messages.
  - path: max_in_flight
    name: max_in_flight
    label: Max In Flight
    type: int
    default: 64
    optional: true
    description: >-
      The maximum number of messages to have in flight at any given time.
