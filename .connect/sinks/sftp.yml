model_version: '1'
label: sftp
name: sftp
status: preview
description: |-
  Writes files to an SFTP server.
    
    In order to have a different path for each object you should use function interpolations described xref:configuration:interpolation.adoc#bloblang-queries[here].
    
    # Performance
    
    This output benefits from sending multiple messages in flight in parallel for improved performance. You can tune the max number of in flight messages (or message batches) with the field `max_in_flight`.
fields:
  - path: address
    name: address
    label: address
    kind: scalar
    type: string
    optional: false
    description: |-
      The address of the server to connect to.
  - path: path
    name: path
    label: path
    kind: scalar
    type: string
    optional: false
    description: |-
      The file to save the messages to on the server.
  - path: codec
    name: codec
    label: codec
    kind: scalar
    type: string
    default: '"all-bytes"'
    optional: true
    examples:
      - lines
      - "delim:\t"
      - delim:foobar
    description: |-
      The way in which the bytes of messages should be written out into the output data stream. It's possible to write lines using a custom delimiter with the `delim:x` codec, where x is the character sequence custom delimiter.
  - path: credentials
    name: credentials
    label: credentials
    kind: scalar
    type: object
    optional: false
    description: |-
      The credentials to use to log into the target server.
    fields:
      - path: credentials.username
        name: username
        label: username
        kind: scalar
        type: string
        default: '""'
        optional: true
        description: |-
          The username to connect to the SFTP server.
      - path: credentials.password
        name: password
        label: password
        kind: scalar
        type: string
        default: '""'
        optional: true
        description: |-
          The password for the username to connect to the SFTP server.
        secret: true
      - path: credentials.private_key_file
        name: private_key_file
        label: private_key_file
        kind: scalar
        type: string
        default: '""'
        optional: true
        description: |-
          The private key for the username to connect to the SFTP server.
      - path: credentials.private_key_pass
        name: private_key_pass
        label: private_key_pass
        kind: scalar
        type: string
        default: '""'
        optional: true
        description: |-
          Optional passphrase for private key.
        secret: true
  - path: max_in_flight
    name: max_in_flight
    label: max_in_flight
    kind: scalar
    type: int
    default: '64'
    optional: true
    description: |-
      The maximum number of messages to have in flight at a given time. Increase this to improve throughput.
