# .github/workflows/test-docker-build.yml
# Tests Docker build on PRs to catch issues before release

name: Test Docker Build

on:
  pull_request:
    paths:
      - 'Dockerfile'
      - '.github/workflows/release.yml'
      - '.github/workflows/docker-build.yml'
      - '.github/workflows/test-docker-build.yml'
      - 'go.mod'
      - 'go.sum'
      - '**.go'

jobs:
  test-docker:
    name: Test Docker Build
    uses: ./.github/workflows/docker-build.yml
    with:
      push: false
      tags: |
        type=ref,event=pr
        type=sha
      platforms: linux/amd64,linux/arm64
      image_name: connect-runtime-wombat-test